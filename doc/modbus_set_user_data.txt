modbus_set_user_data(1)
=======================


NAME
----
modbus_set_user_data - attach a user data pointer to the context


SYNOPSIS
--------
*int modbus_set_user_data(modbus_t *'ctx', void *'user_data');*


DESCRIPTION
-----------
The *modbus_set_user_data()* function shall set a user data pointer in the
libmodbus context.

The user is free to attach the data he wants in the libmodbus context.

RETURN VALUE
------------
The function shall return 0 if successful. Otherwise it shall return -1 and set
errno to one of the values defined below.


ERRORS
------
*EINVAL*::
The libmodbus context is invalid.


EXAMPLE
-------
[source,c]
-------------------
modbus_t *ctx;
static const char* user_string = "first context";

ctx = modbus_new_rtu("/dev/ttyUSB0", 115200, 'N', 8, 1);
if (ctx == NULL) {
    fprintf(stderr, "Unable to create the libmodbus context\n");
    return -1;
}

rc = modbus_set_user_data(ctx, (void*)user_string);
if (rc == -1) {
    fprintf(stderr, "Invalid slave ID\n");
    modbus_free(ctx);
    return -1;
}

if (modbus_connect(ctx) == -1) {
    fprintf(stderr, "Connection failed: %s\n", modbus_strerror(errno));
    modbus_free(ctx);
    return -1;
}

(...)

const char* the_user_string;

rc = modbus_get_user_data(ctx, (void**)&the_user_string);
if (rc == -1) {
    fprintf(stderr, "Invalid slave ID\n");
    modbus_free(ctx);
    return -1;
} else {
    printf("The user string is %s\n", the_user_string);
}

-------------------

SEE ALSO
--------
linkmb:modbus_get_user_data[1]

AUTHORS
-------
The libmodbus documentation was written by St√©phane Raimbault
<stephane.raimbault@gmail.com>
